<ion-header [translucent]="true">
  <ion-toolbar color="secondary">
    <ion-title>Your Library</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    
  <ion-toolbar>
    <ion-segment [(ngModel)]="selectedStatusFilter" (ionChange)="filterBooks()">
      <ion-segment-button value="all">
        <ion-label>All</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Currently reading">
        <ion-label>Reading</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Want to read">
        <ion-label>Planned</ion-label>
      </ion-segment-button>
      <ion-segment-button value="Read">
        <ion-label>Finished</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

  <ion-list>
    <ion-header>
      <ion-label>Total Books: {{ filteredBooks.length }}</ion-label>
    </ion-header>

    @for (book of filteredBooks; track book.id) {
      <ion-item detail>
        <ion-label>
          <h2>{{ book.title }} <ion-badge color="tertiary">{{ book.format }}</ion-badge></h2>
          <p>{{ book.author }} ({{ book.genre }})</p>
          <p>Status: <strong>{{ book.status }}</strong></p>
        </ion-label>
        
        <ion-buttons slot="end">
            <ion-button color="primary" (click)="openEditBookModal(book)">
                <ion-icon name="create-outline"></ion-icon>
            </ion-button>
            <ion-button color="danger" (click)="deleteBook(book.id)">
                <ion-icon name="trash-outline"></ion-icon>
            </ion-button>
        </ion-buttons>
      </ion-item>
    }
    
    <p *ngIf="filteredBooks.length === 0" class="ion-padding ion-text-center">
      No books found in this category.
    </p>

  </ion-list>
  
  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button color="primary" id="open-add-book-modal">
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  
  <ion-modal trigger="open-add-book-modal" [isOpen]="isAddModalOpen" (willDismiss)="isAddModalOpen = false">
    
    <!-->ng-template>
        <app-add-book-modal (bookAdded)="loadBooks(); isAddModalOpen = false" (closeModal)="isAddModalOpen = false"></app-add-book-modal>
        
    </ng-template>-->
    
  </ion-modal>

</ion-content>