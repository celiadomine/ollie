<ion-header>
  <ion-toolbar color="secondary">
    <ion-title>Finish Book </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">Cancel</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <p>Omg congratulations on finishing <strong>{{ book?.title }}</strong>!<br>Please enter your final thoughts.</p>

  <ion-item>
    <ion-label position="floating">Final Page (of {{ book?.total_pages }})</ion-label>
    <ion-input type="number" 
               [min]="book?.current_page" 
               [max]="book?.total_pages"
               [(ngModel)]="finalPage" 
               required>
    </ion-input>
  </ion-item>
  
  <ion-list-header>
    <ion-label>Rating ({{ rating }} / 5 Stars)</ion-label>
  </ion-list-header>
  
  <ion-item lines="none">
    <ion-range [ticks]="true" [snaps]="true" [min]="0" [max]="5" [step]="1" color="primary" [(ngModel)]="rating">
      <ion-icon slot="start" name="star-outline"></ion-icon>
      <ion-icon slot="end" name="star"></ion-icon>
    </ion-range>
  </ion-item>

  <ion-item class="ion-margin-top">
    <ion-label position="stacked">Your Review/Thoughts</ion-label>
    <ion-textarea rows="4" placeholder="Enter your final thoughts here..." [(ngModel)]="reviewText"></ion-textarea>
  </ion-item>
  
  <ion-button expand="block" 
              class="ion-margin-top" 
              color="secondary" 
              [disabled]="finalPage < (book?.current_page || 0) || finalPage > (book?.total_pages || 0) || !book"
              (click)="finishReading()">
    Mark as Read & Save Review
  </ion-button>
</ion-content>